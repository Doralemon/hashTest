!function(){function t(){this.routers={},this.beforeFun=null,this.afterFun=null}var n={getParamsUrl:function(){for(var t=location.hash.split("?"),n=t[0].split("#")[1],r=t[1]?t[1].split("&"):[],e={},o=0;o<r.length;o++){var a=r[o].split("=");e[a[0]]=a[1]}return{path:n,query:e}}};t.prototype={init:function(){var t=this;window.addEventListener("load",function(){t.urlChange()}),window.SPA_RESOLVE_INIT=null},refresh:function(t){var n=this;n.beforeFun?n.beforeFun({to:{path:t.path,query:t.query},next:function(){n.routers[t.path].callback.call(n,t)}}):n.routers[t.path].callback.call(n,t)},urlChange:function(){var t=n.getParamsUrl();this.routers[t.path]?this.refresh(t):location.hash="/index"},map:function(t,n){t=t.replace(/\s*/g,""),n&&"[object Function]"===Object.prototype.toString.call(n)?this.routers[t]={callback:n,fn:null}:console.trace("注册"+t+"地址需要提供正确的的注册回调")},beforeEach:function(t){"[object Function]"===Object.prototype.toString.call(t)?this.beforeFun=t:console.trace("路由切换前钩子函数不正确")},afterEach:function(t){"[object Function]"===Object.prototype.toString.call(t)?this.afterFun=t:console.trace("路由切换后回调函数不正确")},asyncFun:function(t,n,r){var e=this;e.routers[n.path].fn?(e.afterFun&&e.afterFun(n),e.routers[n.path].fn(n)):(e.afterFun&&e.afterFun(n),e.routers[n.path].fn=r,e.routers[n.path].fn(n))},syncFun:function(t,n){this.afterFun&&this.afterFun(n),t&&t&&t(n)}},window.spaRouters=new t}();