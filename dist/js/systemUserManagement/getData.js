define(["jquery","common/amdApi"],function(t,a){return{getListData:function(a){for(var e="",n=0;n<a.result.data.length;n++){var s=a.result.data[n];e+='<tr id="'+s.id+'" state="'+s.state+'"><td>'+s.name+"</td><td>"+s.email+"</td><td>"+s.roles.join(",")+"</td><td>"+s.date_created+"</td><td>"+("0"==s.state?"有效":"冻结")+'</td><td><span class="btnEdit">编辑</span><span class="btnResetPass">重置密码</span><span class="btnIce" >'+("0"==s.state?"冻结":"激活")+'</span><span class="btnDelete">删除</span></td></tr>'}t(".kandao-systemUser").find("table tbody").html(e)},myAjax:function(e){var n=this;a.ajax({url:"backend/users",type:"get",json:e},function(s){n.getListData(s);var o=Math.ceil(s.result.count/10);s.result.index=o,t(".accoutSearchContent>p").text("总计"+s.result.count+"条信息"),t(".accoutList-bottom>p").text("每页显示10条信息,共"+o+"页");var i;i=o<6?o:6,1==o?t(".pagination").hide():t(".pagination").show(),function(s,o,i){t(".kandao-systemUser").find(".pagination").jBootstrapPage({pageSize:s,total:i,pageNow:e.page,maxPageButton:o,onPageClicked:function(t,s){e.page=s+1,a.ajax({url:"backend/users",type:"get",json:e},function(t){n.getListData(t)})}})}(10,i,s.result.count),e.page>6&&(t(".pagination .goTo input").val(e.page),t(".go").click(),t(".pagination .goTo input").val(""))})}}});