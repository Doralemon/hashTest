define(["jquery","text!tpls/accoutManagementList.html","artTemplate","accoutManagement/newAdd","accoutManagement/info","accoutManagement/secretKey","accoutManagement/delete","accoutManagement/search","common/amdApi","common/getPage","bootstrap","page"],function(t,a,n,e,o,c,i,r,d,l){return function(l){var u=1;l.flag1?t(".kandao-accout .pagination>li").each(function(a,n){t(n).hasClass("active")&&(u=t(n).children("a").attr("page"),u=parseInt(u))}):u=1,1!=t(".kandao-accout table tbody tr").length||l.flag2||(u=u-1||1);var s={limit:10,page:u};d.ajax({url:"customers",type:"get",json:s},function(g){var h=Math.ceil(g.result.count/10);g.result.index=h;var p=n.render(a,g.result),f=t(p).on("click",".newAdd",function(){l.flag1=!1,e()}).on("click",".btnInfo",function(){var a=t(this).parents("tr").attr("id");o(a)}).on("click",".btn-secretKey",function(){var a=t(this).parents("tr").attr("id");c(a)}).on("click",".btn-delete",function(){l.flag2=!1;var a=t(this).parents("tr").attr("id");i(a)}).on("click",".accoutSearch",function(){r()}).on("keydown",'input[name="q"]',function(t){13==t.keyCode&&(t.preventDefault(),f.find(".accoutSearch").trigger("click"))});l.flag1=!0,l.flag2=!0,t(".kandao-contentBody").html(f),t(".breadcrumb li").eq(0).on("click",function(){console.log(123),t(".home").trigger("click")});var m;m=h<6?h:6,1==h?t(".pagination").hide():t(".pagination").show(),function(a,n,e){t(".kandao-accout").find(".pagination").jBootstrapPage({pageSize:a,total:e,pageNow:s.page,maxPageButton:n,onPageClicked:function(a,n){s.page=n+1,d.ajax({url:"customers",type:"get",json:s},function(a){for(var n=" <thead><tr><th>公司</th><th>姓名</th><th>邮箱</th><th>手机</th><th>密钥有效期</th><th>激活设备数</th><th>创建者</th><th>操作</th></tr></thead><tbody>",e=0;e<a.result.data.length;e++){var o=a.result.data[e];n+='<tr id="'+o.id+'"><td>'+o.company+"</td><td>"+o.name+"</td><td>"+o.email+"</td><td>"+o.phone+"</td><td>"+o.finaltime+"</td><td>"+o.activatedN+"/"+o.licenseN+"</td><td>"+o.creator+'</td><td><span class="btnInfo">详情</span><span class="btn-secretKey">密钥</span><span class="btn-delete">删除</span></td></tr>'}n+="</tbody>",t(".kandao-accout .accoutSearchContent table").html(n)})}})}(10,m,g.result.count),u>6&&(t(".pagination .goTo input").val(u),t(".go").click(),t(".pagination .goTo input").val(""))})}});