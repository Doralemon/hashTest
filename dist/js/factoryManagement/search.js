define(["jquery","text!tpls/factoryManagementSeach.html","artTemplate","factoryManagement/newAdd","factoryManagement/edit","factoryManagement/delete","factoryManagement/search","common/amdApi"],function(t,a,n,e,o,r,d,c){return function(){var e=t('.kandao-factory input[name = "q"]').val(),o={q:e,limit:10};c.ajax({url:"productions/factory",type:"get",json:o},function(e){var r=Math.ceil(e.result.count/10);e.result.index=r;var d=n.render(a,e.result),i=t(d);t(".kandao-factory .factorySeachContent").html(i);var u;u=r<6?r:6,1==r?t(".pagination").hide():t(".pagination").show(),function(a,n,e){t(".kandao-factory .factorySeachContent").find(".pagination").jBootstrapPage({pageSize:a,total:e,maxPageButton:n,onPageClicked:function(a,n){o.page=n+1,c.ajax({url:"productions/factory",type:"get",json:o},function(a){for(var n="",e=0;e<a.result.data.length;e++){var o=a.result.data[e];n+='<tr id="'+o.id+'"><td>'+o.no+"</td><td>"+o.name+"</td><td>"+o.description+"</td><td>"+o.creator+"</td><td>"+o.date_created+'</td><td id="'+o.id+'"><button type="button" class="btn btn-edit btn-sm">编辑</button><button type="button" class="btn btn-delete btn-sm">删除</button></td>'}t(".kandao-factory table tbody").html(n)})}})}(10,u,e.result.count)})}});