define(["jquery","text!tpls/productionVersionManagementInfo.html","artTemplate","productionVersionManagement/versionAdd","productionVersionManagement/versionEdit","productionVersionManagement/versionDelete","productionVersionManagement/versionRetry","common/amdApi","productionVersionManagement/getData","bootstrap","page"],function(n,t,o,e,a,i,r,s,c){return function(u,g){s.ajax({url:"softwares/"+u,type:"get"},function(p){var l={limit:10};s.ajax({url:"softwares/"+u+"/versions",type:"get",json:l},function(d){var f=Math.ceil(d.result.count/10);d.result.index=f,d.result.info=p.result;var v=o.render(t,d.result),m=n(v).on("click",".goback,.toProduction",function(){n(".productionVersionManagement").trigger("click")}).on("click",".newAdd",function(){e(u,g)}).on("click",".btn-edit",function(){var t=n(this).parents("tr").attr("id");a(u,t)}).on("click",".btn-retry",function(){var t=n(this).parents("tr").attr("id");r(u,t)}).on("click",".btn-delete",function(){var t=n(this).parents("tr").attr("id");i(u,t)});n(".kandao-contentBody").html(m),c.getInfoData(d),n(".versionSon").on("click",function(){s.ajax({url:"softwares/"+u+"/versions",type:"get",json:l},function(n){c.getInfoData(n)})});var k;k=f<6?f:6,1==f?n(".pagination").hide():n(".pagination").show(),function(t,o,e){n(".kandao-versionManagement").find(".pagination").jBootstrapPage({pageSize:t,total:e,pageNow:l.page,maxPageButton:o,onPageClicked:function(n,t){l.page=t+1,s.ajax({url:"softwares/"+u+"/versions",type:"get",json:l},function(n){c.getInfoData(n)})}})}(10,k,d.result.count),l.page>6&&(n(".pagination .goTo input").val(l.page),n(".go").click(),n(".pagination .goTo input").val("")),c.getInfoData(d)})})}});