define(["jquery","common/amdApi","kandaonewsManagement/getData","text!tpls/deletModal.html","../common/getPage"],function(e,a,t,n,o){return function(d,l,i,s){e("#deleteMassage").remove(),flag=!0;var c=o(e(".kandao-news"),10,flag);c.json.q=l,c.json.language=s,c.json.category_id=i,$deletModal=e(n).on("click",".btn-comfirm",function(){a.ajax({url:"official/kd_news/"+d+"/delete",type:"post"},function(){$deletModal.find("h5").html("删除成功！"),a.ajax({url:"official/kd_news/list",type:"get",json:c.json},function(a){if(!a.result.data.length)return void e(".kandaoNewsManagement").click();t.getListData(a);var n=e(".kandao-news .reportSearchContent>p").text(),o=n.replace("总计","");o=o.replace("条信息",""),e(".kandao-news .reportSearchContent>p").text("总计"+(o-1)+"条信息")}),$deletModal.find(".btn").hide(),setTimeout(function(){$deletModal.modal("hide"),e(".modal-backdrop").css("display","none")},500)})}).appendTo("body").modal(),e("#deleteMassage").find("h5").html("你确定要删除该篇新闻吗？")}});