define(["jquery","text!tpls/systemBackend/rolesAdd.html","artTemplate","systemRolesManagement/rolesOpation","common/amdApi","systemRolesManagement/getData","bootstrap"],function(e,s,t,o,d,l){return function(l){e("#systemRoleAdd").remove();var n=t.render(s,l.result),r=[];$rolesAdd=e(n).appendTo("body").modal(),o.kandaoRoles("#systemRoleAdd .ptionalRoles","#systemRoleAdd .selectedPermissions","#systemRoleAdd .selectAll","#systemRoleAdd .delAll","#systemRoleAdd .rolesipt"),$rolesAdd.on("submit","form",function(s){s.preventDefault();var t=e('#systemRoleAdd input[name="name"]').val(),l=e('#systemRoleAdd textarea[name="description"]').val();if(r=o.getRolesId("#systemRoleAdd .selectedPermissions"),!e.trim(t)||!e.trim(l)||!r)return void alert("请确认角色名称描述及权限都添加完成！");var n={name:t,description:l,permissions:r};d.ajax({url:"backend/permissions/roles/add",type:"post",json:JSON.stringify(n)},function(){$rolesAdd.modal("hide"),e(".rolesManagement").trigger("click")})})}});