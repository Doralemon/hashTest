require.config({urlArgs:"r="+(new Date).getTime(),baseUrl:"js",paths:{jquery:"lib/jquery-2.1.4",cookie:"lib/jquery.cookie",text:"lib/text",tpls:"../tpls",artTemplate:"lib/template-web",bootstrap:"../assets/bootstrap/js/bootstrap",upload:"../assets/uploadifive/jquery.uploadifive.min",datetime:"../assets/bootstrap-datetimepicker-master/js/bootstrap-datetimepicker",page:"lib/jBootstrapPage",sortable:"lib/Sortable",fileinput:"lib/fileinput",kindEditor:"../assets/kindeditor/kindeditor-all",lang:"../assets/kindeditor/lang/zh-CN"},shim:{bootstrap:{deps:["jquery"]},datetime:{deps:["bootstrap"]},upload:{deps:["jquery"]},page:{deps:["jquery"]},fileinput:{deps:["jquery"]},kindEditor:{deps:["jquery"]},lang:{deps:["kindEditor"]}}}),require(["jquery","common/api","cameraManagement/list","projectManagement/list","factoryManagement/list","accoutManagement/list","secretKeyManagement/list","productionVersionManagement/list","userCenter/userBasic","userCenter/changePass","systemUserManagement/list","systemRolesManagement/list","systemLog/list","mediaManagement/list","mediaPlayList/list","transCodingManagement/list","reportManagement/list","kandaonewsManagement/list","FAQmanagement/list","home/list","text!../tpls/loading.html","common/amdApi","common/route","cookie"],function(s,e,a,t,n,o,i,c,r,u,l,p,d,m,g,f,h,k,b,y,v,R){function w(){for(var e=s(".kandao-aside .list-group a"),a="#"+C().path,t=window.location.host,n=0;n<e.length;n++){var o=e.eq(n).attr("href");console.log(),s.trim(a)==s.trim(o)?(s(".kandao-aside").find("a").removeClass("active"),e.eq(n).addClass("active")):a=="http://"+t+"/"&&(s(".kandao-aside").find("a").removeClass("active"),e.eq(0).addClass("active"))}}function C(){for(var s=location.hash.split("?"),e=s[0].split("#")[1],a=s[1]?s[1].split("&"):[],t={},n=0;n<a.length;n++){var o=a[n].split("=");t[o[0]]=o[1]}return{path:e,query:t}}var L=s.cookie("username"),M=s.cookie("token");M||(location.href="login.html");var S=JSON.parse(M),j=s(v);s(".kandao-progress").css("display","none"),s(".kandao-contanier").css("display","block"),j.appendTo("body").modal();var F={flag:!0};s.ajaxSetup({beforeSend:function(e){F.flag&&(e.setRequestHeader("x-token-id",S),"block"!=s("#zzz").css("display")&&j.appendTo("body").modal())},complete:function(){j.on("hidden.bs.modal",function(){j.remove()}).modal("hide")}}),s(".kandao-content-top .users span").text(L),j.on("hidden.bs.modal",function(){j.remove()}).modal("hide");var q={flag1:!0,flag2:!0};s(".kandao-aside .list-group").on("click","a",function(){s(".kandao-aside a").removeClass("active"),s(this).addClass("active"),s(this).hasClass("mediaManagement")?s(".mediaSonList").stop().slideToggle():s(this).hasClass("home")?y():s(this).hasClass("productionVersionManagement")?c(q):s(this).hasClass("backStageManagement")?s(".systemSonList").stop().slideToggle():s(this).hasClass("websiteManagment")&&s(".websiteSonList").stop().slideToggle()}),s(".loginOut").on("click",function(){R.ajax({url:"users/logout",type:"post"},function(e){s.removeCookie("token",null,{path:"/"}),location.href="login.html"})});var x={flag1:!0,flag2:!0},B={flag1:!0,flag2:!0},T={flag1:!0,flag2:!0},P={flag1:!0,flag2:!0},A={flag1:!0,flag2:!0},I={flag1:!0,flag2:!0},U={flag1:!0,flag2:!0},z={flag1:!0,flag2:!0,flag3:!0},N={flag1:!0,flag2:!0};s(".home").trigger("click"),function(){spaRouters.map("/index",function(s){spaRouters.syncFun(y,s)}),spaRouters.map("/media/mediaLibrary",function(e){s(".mediaSonList").show(),spaRouters.syncFun(m.bind(F,x),e)}),spaRouters.map("/media/mediaLibrary/info",function(s){console.log(s)}),spaRouters.map("/media/playList",function(e){s(".mediaSonList").show(),spaRouters.syncFun(g.bind(B),e)}),spaRouters.map("/media/transCode",function(e){s(".mediaSonList").show(),spaRouters.syncFun(f.bind(T),e)}),spaRouters.map("/customer/account",function(e){s(".customerSonList").show(),spaRouters.syncFun(o.bind(P),e)}),spaRouters.map("/customer/sercetKey",function(e){s(".customerSonList").show(),spaRouters.syncFun(i,e)}),spaRouters.map("/productionVersion",function(s){spaRouters.syncFun(c.bind(q),s)}),spaRouters.map("/product/camera",function(e){s(".productSonList").show(),spaRouters.syncFun(a.bind(A),e)}),spaRouters.map("/product/project",function(e){s(".productSonList").show(),spaRouters.syncFun(t.bind(I),e)}),spaRouters.map("/product/factory",function(e){s(".productSonList").show(),spaRouters.syncFun(n.bind(U),e)}),spaRouters.map("/website/manuscript/report",function(e){s(".websiteSonList").show(),s(".manuscriptBox").show(),spaRouters.syncFun(h.bind(F),e)}),spaRouters.map("/website/manuscript/kandaoNews",function(e){s(".websiteSonList").show(),s(".manuscriptBox").show(),spaRouters.syncFun(k.bind(F),e)}),spaRouters.map("/website/FAQ",function(e){s(".websiteSonList").show(),spaRouters.syncFun(b,e)}),spaRouters.map("/backStage/systemUser",function(e){s(".systemSonList").show(),spaRouters.syncFun(l.bind(z),e)}),spaRouters.map("/backStage/roles",function(e){s(".systemSonList").show(),spaRouters.syncFun(p.bind(N),e)}),spaRouters.map("/backStage/operationLog",function(e){s(".systemSonList").show(),spaRouters.syncFun(d,e)}),spaRouters.map("/userBaseInfo",function(e){s(".userBaseInfo").trigger("click")}),spaRouters.map("/changePass",function(e){s(".changePass").trigger("click")}),spaRouters.init(),spaRouters.urlChange(),w()}(),function(){s(".customerManagement").on("click",function(){s(".customerSonList").stop().slideToggle()}),s(".productManagment").on("click",function(){s(".productSonList").stop().slideToggle()}),s(".mediaLibrary").on("click",function(){m(F,x)}),s(".playList").on("click",function(){g(B)}),s(".transcodingManagement").on("click",function(){f(T)}),s(".accoutManagement").on("click",function(){o(P)}),s(".keyManagement").on("click",function(){i()}),s(".cameraManagement").on("click",function(){a(A)}),s(".projectManagement").on("click",function(){t(I)}),s(".factoryManagement").on("click",function(){n(U)}),s(".manuscriptManagement").on("click",function(){s(".manuscriptBox").stop().slideToggle()}),s(".reportManagement").on("click",function(){h(F)}),s(".kandaoNewsManagement").on("click",function(){k(F)}),s(".FAQManagement").on("click",function(){b()}),s(".systemUserManagement").on("click",function(){l(z)}),s(".rolesManagement").on("click",function(){p(N)}),s(".operationLog").on("click",function(){d()}),s(".users").hover(function(){s(".userSonList").stop().slideDown()},function(){s(".userSonList").stop().slideUp()}),s(".userBaseInfo").on("click",function(){s(".kandao-aside").find("a").removeClass("active"),s(this).addClass("active").siblings().removeClass("active"),r(),s(".btnChangePass").removeClass("active"),s(".btnBaseInfo").addClass("active")}),s(".changePass").on("click",function(){s(".kandao-aside").find("a").removeClass("active"),s(this).addClass("active").siblings().removeClass("active"),u(),s(".btnChangePass").addClass("active"),s(".btnBaseInfo").removeClass("active")})}()});