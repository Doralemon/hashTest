define(["jquery","text!tpls/websiteManagement/kandaonewsManagementList.html","artTemplate","common/amdApi","kandaonewsManagement/add","kandaonewsManagement/edit","kandaonewsManagement/newsClounmManagement","kandaonewsManagement/Info","../reportManagement/toTop","kandaonewsManagement/delete","kandaonewsManagement/getData","kandaonewsManagement/search","bootstrap","page"],function(n,t,e,a,i,o,s,r,c,l,d,m){return function(u){var f,g,p,k,y,w=!0,b={limit:10,is_reverse:y||1};a.ajax({url:"official/kd_news/list",type:"get",json:b},function(h){a.ajax({url:"official/category/list",type:"get",json:b},function(v){h.result.newsType=v.result;var M=e.render(t,h.result),x=n(M).on("click",".Addnew",function(){i(u,v)}).on("click",".columnManagament",function(){s(v)}).on("click",".btnEdit",function(){if(f=n(this).parents("tr").attr("id"),g||k||p)return void o(u,f,v,p,g,k);o(u,f,v)}).on("click",".btnInfo",function(){f=n(this).parents("tr").attr("id"),r(f)}).on("click",".toTop",function(){c()}).on("click",".btnDelete",function(){if(f=n(this).parents("tr").attr("id"),g||k||p)return void l(f,g,p,k);l(f)}).on("click",".firstColumn .sBox",function(){n(".firstColumn .sBox").removeClass("active"),n(this).addClass("active"),p=n(this).attr("id")}).on("click",".sortByTime",function(){w?(y=1,x.find("span.sortByTime").addClass("glyphicon-sort-by-attributes").removeClass("glyphicon-sort-by-attributes-alt"),x.find("span.sortByTime").text("按时间升序")):(y=0,x.find("span.sortByTime").removeClass("glyphicon-sort-by-attributes").addClass("glyphicon-sort-by-attributes-alt"),x.find("span.sortByTime").text("按时间降序")),w=!w,b.is_reverse=y,a.ajax({url:"official/kd_news/list",type:"get",json:b},function(n){d.myAjax(b,n)})}).on("click",".newsSearch",function(){g=x.find('input[name="q"]').val(),k=x.find('select[name="type"]').val(),b.q=g,b.page=1,b.language=k,m(b)}).on("keydown",'input[name="q"]',function(n){13==n.keyCode&&(n.preventDefault(),x.find(".newsSearch").trigger("click"))});n(".kandao-contentBody").html(x),d.myAjax(b,h),x.find(".sortByTime").click()})}),n(".breadcrumb li").eq(0).on("click",function(){n(".home").trigger("click")})}});