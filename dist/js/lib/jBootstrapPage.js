!function(a){a.fn.jBootstrapPage=function(e){var i,t,n={pageSize:10,total:0,maxPages:1,realPageCount:1,lastSelectedIndex:1,selectedIndex:1,maxPageButton:3,pageNow:1,onPageClicked:null};return this.each(function(){function l(a,e,i,t){if(!(i<1)){var l=Math.ceil(t/2);if(a!=e&&a<l||a+1==2){c.find("li.page").remove();var s=e+Math.floor(l/2);s<n.maxPageButton&&(s=n.maxPageButton+1);var d=s-n.maxPageButton;if(d<=0&&(d=1),s-d>=n.maxPageButton){var r=s-d-n.maxPageButton;0==r&&(r=1),s-=r}for(var f=0,g="",p=d;p<=s;p++)f++,g+='<li class="page" pNum="'+f+'"><a href="#" page="'+p+'">'+p+"</a></li>";c.find("li:nth-child(2)").before(g),o()}}}function s(a,e,i,t){if(!(i<1)){var l=t-1;if((a!=e+1||i>t)&&a>=l){var s=e-2,d=e+l;if(d=d>=i?i:d,d<=n.maxPageButton&&(d=n.maxPageButton),d-s>=n.maxPageButton){var r=d-s-n.maxPageButton;d-=r}if(d==i&&d++,d-s<n.maxPageButton){var r=n.maxPageButton-(d-s);s-=r}for(var f=0,g="",p=s;p<d;p++)f++,g+='<li class="page" pNum="'+f+'"><a href="#" page="'+p+'">'+p+"</a></li>";c.find("li.page").remove(),c.find("li:nth-child(2)").before(g),o()}}}function d(e,i,t,n){if(!i)return!1;if(!parseInt(i))return!1;var l=!0;if(a(".page").each(function(e,t){a(t).find("a").text()==i&&(l=!1)}),2==i&&(l=!0),l&&!(t<i)){var s=t-i>n?i:i-(n-(t-i));2==i&&(s=1);var d=s+n;i==d?s+=1:d-=1;for(var r="",f=1,g=s;g<=d;g++)s++,r+='<li class="page" pNum="'+f+'"><a href="#" page="'+g+'">'+g+"</a></li>",f+=1;c.find("li.page").remove(),c.find("li:nth-child(2)").before(r),a("[page="+a(".goTo").find("input").val()+"]").parent().addClass("active").siblings().removeClass("active"),o()}}function r(a){n.lastSelectedIndex=n.selectedIndex,n.selectedIndex=parseInt(a.text()),n.onPageClicked&&n.onPageClicked.call(this,c,n.selectedIndex-1),c.find("li.active").removeClass("active"),a.parent().addClass("active"),n.selectedIndex>1?i.hasClass("disabled")&&(i.removeClass("disabled"),g()):i.hasClass("disabled")||i.addClass("disabled"),n.selectedIndex>=n.maxPages?t.hasClass("disabled")||t.addClass("disabled"):t.hasClass("disabled")&&(t.removeClass("disabled"),p())}function f(e){var i=c.find("li.active").find("a");if(e.hasClass("next")){var t=parseInt(i.text()),f=parseInt(c.find("li.active").attr("pNum"))+1;f>n.maxPageButton&&(f=n.maxPageButton-1),t>0&&(s(f,t,n.maxPages,n.maxPageButton),i=c.find("li.page").find('a[page="'+(t+1)+'"]'))}else if(e.hasClass("pre")){var t=parseInt(i.text())-1,f=parseInt(c.find("li.active").attr("pNum"))-1;f<1&&(f=1),l(f,t,n.maxPages,n.pageSize),i=c.find("li.page").find('a[page="'+t+'"]')}else if(e.hasClass("go")){var t=parseInt(i.text()),o=parseInt(a(".goTo input").val()),g=Math.ceil(n.total/n.pageSize),p=/^\+?[1-9][0-9]*$/;if(!p.test(o))return;if(!o)return;if(o>g)return void alert("您输入的页码不存在，请重新输入！");d(t,o,g,n.maxPageButton),i=c.find("li.page").find('a[page="'+o+'"]')}else i=e;r(i)}function o(){c.find("li.page a").each(function(){a(this).parent().hasClass("disabled")||a(this).on("pageClick",function(e){f(a(this))})}),c.find("li.page a").click(function(e){e.preventDefault(),a(this).trigger("pageClick",e)})}function g(){c.find("li a.first,li a.pre").each(function(){a(this).parent().hasClass("disabled")||(a(this).unbind("pageClick"),a(this).on("pageClick",function(e){f(a(this))}))})}function p(){c.find("li a.last,li a.next").each(function(){a(this).parent().hasClass("disabled")||(a(this).unbind("pageClick"),a(this).on("pageClick",function(e){f(a(this))}))})}var c=a(this);e&&a.extend(n,e),function(){if(c.find("li").remove(),n.maxPages=Math.ceil(n.total/n.pageSize),!(n.maxPages<1)){c.append('<li class="disabled"><a class="pre" href="#"></a></li>');for(var a=n.maxPages<n.maxPageButton?n.maxPages:n.maxPageButton,e=0,l=1;l<=a;l++)e++,c.append('<li class="page" pNum="'+e+'"><a href="#" page="'+l+'">'+l+"</a></li>");c.append('<li><a class="next" href="#"></a></li>'),c.append('<li class="goTo">跳转到<input id="number" min="1" onpaste="return false"/><a class="go">GO</a></li>'),1==n.pageNow?(c.find("li:last-child").prev().removeClass("disabled"),c.find("li:nth-child(1)").addClass("disabled")):n.pageNow>1&&n.pageNow<n.maxPages?(c.find("li:first-child").removeClass("disabled"),c.find("li:last-child").prev().removeClass("disabled")):(c.find("li:first-child").removeClass("disabled"),c.find("li:last-child").prev().addClass("disabled")),c.find("li:nth-child("+(n.pageNow+1)+")").addClass("active"),i=c.find("li a.pre").parent(),t=c.find("li a.next").parent(),document.getElementById("number").addEventListener("input",function(a){a.target.value=a.target.value.replace(/\-/g,""),a.target.value=a.target.value.replace(/\D/g,"")})}}(),function(){c.find("li.page a,li a.first,li a.last,li a.pre,li a.next,.go").each(function(){a(this).parent().hasClass("disabled")||a(this).on("pageClick",function(e){f(a(this))})}),c.find("li.page a,li a.first,li a.last,li a.pre,li a.next,.go").click(function(e){e.preventDefault(),a(this).parent().hasClass("disabled")||a(this).trigger("pageClick",e)})}()})}}(jQuery);