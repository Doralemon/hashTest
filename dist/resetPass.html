<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>KanDaoBackend-forgotLogin</title><link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" href="sass/base.min.css"><link rel="stylesheet" href="sass/login.min.css"><link rel="shortcut icon" href="./img/favicon.ico"></head><body><header><img src="img/kandao_logo.png" alt=""></header><div id="login-container" class="resetPass"><h3>后台管理系统</h3><div class="login-userInfo"><h4>重置密码</h4><form id="kandao-rensetPass"><div class="form-group"><input type="text" class="form-control" name="email" readonly></div><div class="form-group"><input type="text" class="form-control" placeholder="密码" name="password"> <span class="newPass glyphicon glyphicon-ok-sign"></span><span class="passLenght glyphicon glyphicon-remove-sign">密码位数应该不低于8位且包含数字和字母</span></div><div class="form-group"><input type="text" class="form-control" placeholder="确认密码" name="confirmPass"> <span class="confirmPass glyphicon glyphicon-ok-sign"></span><span class="withNew glyphicon glyphicon-remove-sign">必须与新密码一致</span></div><div class="btnBox"><button class="btn btn-default btn-block">重置密码</button></div></form></div></div><footer><img src="img/kandaobottom.png" alt="" class="logo"></footer><div class="modal fade" tabindex="-1" role="dialog" id="sucessMessage"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><div class="bodyBox"><div class="glyphicon glyphicon-saved text-center"></div><div class="userEmail"></div><div class="passComplete">密码重置完成</div></div></div></div></div></div></body></html><script src="js/lib/jquery-2.1.4.js"></script><script src="js/lib/jquery.cookie.js"></script><script src="assets/bootstrap/js/bootstrap.min.js"></script><script src="js/common/api.js"></script><script>function reSetPass(){var s=JSON.parse($.cookie("token"));s||(location.href="forgotLogin.html");var a=$.cookie("username");$('#kandao-rensetPass input[name = "email"]').val(a),$("#kandao-rensetPass").on("submit",function(e){e.preventDefault();var n=$('#kandao-rensetPass input[name = "password"]').val();if(n===$('#kandao-rensetPass input[name = "confirmPass"]').val()&&passReg.test(new_password)){var o={email:a,password:n};myAjax({url:"users/password_recover",type:"post",data:o,token:s},function(){$("#sucessMessage").appendTo("body").modal(),$(".userEmail").html(a),setTimeout(function(){$("#sucessMessage").modal("hide"),location.href="login.html"},1500)})}})}var new_password,passReg=/^(?!(?:\d+|[a-zA-Z]+)$)[\da-zA-Z]{8,}$/;$('#kandao-rensetPass input[name="password"]').on("blur",function(){if(new_password=$(this).val(),!passReg.test(new_password))return $(".newPass").hide(),void $(".passLenght").show();$(".passLenght").hide(),$(".newPass").show(),$('.personPass input[name="confirmPass"]').trigger("blur")}),$('#kandao-rensetPass input[name="confirmPass"]').on("blur",function(){comfirm_password=$(this).val(),$.trim(new_password)?comfirm_password!==new_password?($(".confirmPass").hide(),$(".withNew").show()):($(".withNew").hide(),$(".confirmPass").show()):($(".withNew").hide(),$(".confirmPass").hide())}),reSetPass()</script>