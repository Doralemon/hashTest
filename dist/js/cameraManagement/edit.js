define(["jquery","text!tpls/cameraManagementEdit.html","artTemplate","common/amdApi","datetime"],function(a,e,t,n){return function(r,d){a("#cameraEdit").remove(),r=parseInt(r),n.ajax({url:"productions/cameras/"+r,type:"get"},function(m){state=m.result.state,m.result.foctory=d.result.foctory,m.result.project=d.result.project,cameraManagementEdit=t.render(e,m.result);var l=a(cameraManagementEdit).appendTo("body").modal();2==state&&(a("#cameraEdit  input").prop("disabled",!0),a("#kandao-project").prop("disabled",!0),a("#kandao-factory").prop("disabled",!0),a("#cameraEdit .sn_date").prop("disabled",!0));var c=a("#kandao-state option");!function(a,e){for(i=0;i<a.length;i++)a[i].value==e&&(a[i].selected=!0)}(c,state),l.find(".kandao-date").datetimepicker({format:"yyyy-mm-dd",language:"zh-CN",autoclose:!0,minView:"month",todayBtn:!0,todayHighlight:!0}),a(".kandao-cameraEdit").on("submit",function(){var e=parseInt(a('#cameraEdit select[name = "factory_id"]').val()),t=parseInt(a('#cameraEdit select[name = "project_id"]').val()),i=parseInt(a('#cameraEdit select[name = "state"]').val()),d=a('#cameraEdit input[name = "sn_date"]').val(),m=a('#cameraEdit input[name = "flash1"]').val(),c=a('#cameraEdit input[name = "flash2"]').val(),o=a('#cameraEdit input[name = "flash3"]').val(),s=a('#cameraEdit input[name = "flash4"]').val(),p=a('#cameraEdit input[name = "flash5"]').val(),u=a('#cameraEdit input[name = "flash6"]').val(),f=a('#cameraEdit input[name = "blue_mac"]').val(),h={id:r,state:i,sn_date:d,flash1:m,flash2:c,flash3:o,flash4:s,flash5:p,flash6:u,blue_mac:f,project_id:t,factory_id:e};return n.ajax({url:"productions/cameras/"+r+"/change",type:"post",json:JSON.stringify(h)},function(e){l.modal("hide"),a(".cameraManagement").trigger("click")}),!1})})}});