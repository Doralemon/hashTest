define(["jquery","text!tpls/cameraManagementSearch.html","artTemplate","cameraManagement/batchAll","cameraManagement/edit","cameraManagement/search","cameraManagement/delete","cameraManagement/deleteAll","common/amdApi","common/checked","bootstrap","page"],function(e,t,a,n,c,o,r,l,d,s){return function(n){var c=(d.url,e('.camera input[name = "q"]').val()),o=parseInt(e('.camera select[name = "state"] option:selected').val()),r=parseInt(e('.camera select[name = "project"] option:selected').val()),l=parseInt(e('.camera select[name = "factory"] option:selected').val()),m=parseInt(e('.camera select[name = "year"] option:selected').val()),i=parseInt(e('.camera select[name = "month"] option:selected').val()),h={q:c,limit:10,page:1,state:o,project:r,factory:l,year:m,month:i};e(".camera table tbody");d.ajax({url:"productions/cameras",type:"get",json:h},function(n){var c=Math.ceil(n.result.count/10);n.result.index=c;var o=a.render(t,n.result);e(o);e(".camera .searchContent").html(o);var r=e(".camera .allCheckbox"),l=e(".camera .sonCheckbox");s.checkbox(r,l);var m;m=c<6?c:6,1==c?e(".pagination").hide():e(".pagination").show(),function(t,a,n){e(".camera .searchContent").find(".pagination").jBootstrapPage({pageSize:t,total:n,maxPageButton:a,onPageClicked:function(t,a){h.page=a+1,d.ajax({url:"productions/cameras",type:"get",json:h},function(t){var a=e(".camera .allCheckbox"),n=e(".camera .sonCheckbox");s.checkbox(a,n);for(var c='<thead><tr><th><form action=""><div class="checkbox"><label><input type="checkbox" class="allCheckbox"></label></div></form></th><th>S/N</th><th>PIN</th><th>状态</th><th>关联邮箱</th><th>操作</th></tr></thead>',o="",r=0;r<t.result.data.length;r++){var l=t.result.data[r];1==l.state?o="未烧录":2==l.state?o="烧录中":3==l.state?o="已烧录":4==l.state&&(o="已失效"),c+='<tbody><tr  id="'+l.id+'"><td><form action=""><div class="checkbox"><label><input type="checkbox" class="sonCheckbox" name="sonCheckbox"></label></div></form></td><td>'+l.sn+"</td><td>"+l.pin+"</td><td>"+o+"</td><td>"+l.email+'</td><td id="'+l.id+'"><button type="button" class="btn btn-edit btn-sm">编辑</button><button type="button" class="btn btn-delete btn-sm">删除</button></td></tr></tbody>'}e(".camera .searchContent table").html(c);var a=e(".camera").find(".allCheckbox"),n=e(".camera").find(".sonCheckbox");s.checkbox(a,n);for(var d=e(".camera .searchContent").find("table tr"),r=0;r<d.length;r++)"烧录中"==e(d[r]).children("td").eq(3).html()&&e(d[r]).find(".btn-delete").addClass("disabledCli disabled")})}})}(10,m,n.result.count);for(var i=e(".camera .searchContent").find("table tr"),b=0;b<i.length;b++)"烧录中"==e(i[b]).children("td").eq(3).html()&&e(i[b]).find(".btn-delete").addClass("disabledCli disabled")})}});