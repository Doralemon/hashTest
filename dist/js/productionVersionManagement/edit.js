define(["jquery","text!tpls/productionVersionManagementEdit.html","artTemplate","common/amdApi","productionVersionManagement/getData"],function(e,t,n,a,r){return function(i,o){e("#editVersion").remove();var s=sessionStorage.getItem("currentPage");a.ajax({url:"softwares/"+i,type:"get"},function(o){var m=n.render(t,o.result),l=e(m).on("submit","form",function(t){t.preventDefault();var n=e('#editVersion input[name="name"]').val(),o=e('#editVersion input[name="title"]').val(),m=e('#editVersion select[name="platform"]').val(),u=e('#editVersion textarea[name="description"]').val();if(!(e.trim(n)&&e.trim(o)&&e.trim(m)&&e.trim(u)))return void alert("请输入所有信息！");var d={name:n,title:o,platform:m,description:u};a.ajax({url:"softwares/"+i+"/change",type:"post",json:JSON.stringify(d)},function(e){l.modal("hide");var t={limit:10,page:s||1};a.ajax({url:"softwares",type:"get",json:t},function(e){r.getListData(e)})})}).appendTo("body").modal()})}});