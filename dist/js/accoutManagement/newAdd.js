define(["jquery","text!tpls/accoutManagementAdd.html","artTemplate","common/amdApi"],function(a,e,t,n){return function(){a(".dropdown-menu").remove(),a("#accoutAdd").remove();var t=a(e).on("submit","form",function(e){e.preventDefault();var o=a('#accoutAdd input[name="email"]').val(),d=a('#accoutAdd input[name="emailComfirm"]').val(),m=a('#accoutAdd input[name="name"]').val(),r=a('#accoutAdd select[name="language"]').val(),i=a('#accoutAdd input[name="company"]').val(),u=a('#accoutAdd input[name="address"]').val(),c=a('#accoutAdd input[name="phone"]').val();if(o!=d)return void alert("请确认邮箱和邮箱保持一致！");if(!(a.trim(o)&&a.trim(d)&&a.trim(m)&&a.trim(i)))return void alert("请输入所有必填信息！");if(!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(o))return void alert("您输入的电子邮箱格式不正确！");var l={email:o,name:m,language:r,company:i,address:u,phone:c};l=JSON.stringify(l),n.ajax({url:"customers/add",type:"post",json:l},function(){t.modal("hide"),a(".accoutManagement").trigger("click")})}).appendTo("body").modal()}});